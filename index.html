<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Elysium Project</title>
  <style>
    :root{
      --grad1: linear-gradient(270deg, #ff0000, #0000ff, #ff0000);
      --tg-grad: linear-gradient(90deg,#0088cc,#00aaff);
    }
    body{
      margin:0; min-height:100vh;
      font-family:"Segoe UI", Roboto, Arial, sans-serif;
      background: var(--grad1);
      background-size: 600% 600%;
      animation: gradientMove 20s ease infinite;
      color:#fff; display:flex; flex-direction:column; align-items:center;
    }
    @keyframes gradientMove {
      0% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
      100% { background-position: 0% 50%; }
    }
    header{ width:100%; padding:24px 20px; text-align:center; background:rgba(0,0,0,0.2); position:relative; }
    header .title{ font-size:clamp(28px,6vw,48px); font-weight:800; color:white; }
    .menu{ position:absolute; top:20px; right:20px; display:flex; gap:10px; }
    .menu button{ background:rgba(255,255,255,0.2); border:none; padding:10px 20px; border-radius:10px; color:#fff; font-weight:600; cursor:pointer; }

    main{ width:100%; max-width:1100px; padding:40px 20px 80px; }
    .card{ background:rgba(255,255,255,0.05); border-radius:16px; padding:36px; margin:20px auto; box-shadow:0 8px 30px rgba(0,0,0,0.6); max-width:820px; }

    .play-big{ display:inline-block; margin:20px auto; padding:20px 50px; font-size:1.6rem; font-weight:800; border:none; border-radius:20px; background:linear-gradient(90deg,#ff0000,#ff5722); color:white; cursor:pointer; box-shadow:0 6px 20px rgba(0,0,0,0.6); }
    .copy-btn{ display:inline-block; margin-top:16px; padding:14px 30px; font-weight:700; border:none; border-radius:12px; background:linear-gradient(90deg,#4CAF50,#2ecc71); color:white; cursor:pointer; }
    .tg-link{ background: var(--tg-grad); display:inline-block; margin-top:16px; font-weight:700; border-radius:14px; text-decoration:none; color:#fff; border:none; cursor:pointer; padding:14px 40px; }

    .user-list{ display:grid; grid-template-columns:repeat(auto-fill,minmax(240px,1fr)); gap:14px; }
    .user-card{ background:rgba(0,0,0,0.45); border-radius:12px; padding:14px; box-shadow:0 4px 18px rgba(0,0,0,0.4); display:flex; flex-direction:column; gap:8px; }
    .user-card .nick{ font-weight:700; font-size:16px; cursor:pointer; }
    .delete-btn{ background:#e53935; color:white; border:none; border-radius:6px; padding:6px; cursor:pointer; font-size:14px; }

    footer{ text-align:center; padding:18px; color:#cfeafc; margin-top:40px; background:rgba(0,0,0,0.06); }

    /* –ú–æ–¥–∞–ª–∫–∏ */
    .modal{ position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.7); display:none; justify-content:center; align-items:center; z-index:999; }
    .modal.active{ display:flex; }
    .modal-content{ background:#1e2a35; padding:20px; border-radius:12px; width:480px; display:none; position:relative; }
    .modal-content.active{ display:block; }
    .modal-close{ position:absolute; top:10px; right:14px; cursor:pointer; font-size:22px; }
    .modal-content input, .modal-content select{ width:100%; padding:10px; margin:6px 0; border-radius:8px; border:none; }
    .modal-content button{ width:100%; padding:10px; margin:6px 0; border:none; border-radius:8px; font-weight:bold; cursor:pointer; }
    .google-btn{ background:#DB4437; color:white; border:none; padding:10px; border-radius:8px; font-weight:700; cursor:pointer; }
    .remember{ display:flex; align-items:center; gap:6px; font-size:14px; margin:8px 0; }
    pre { overflow-x:auto; white-space:pre-wrap; font-size:14px; line-height:1.4; }
  </style>
</head>
<body>
  <header>
    <div class="title">Elysium Project</div>
    <div class="menu">
      <button onclick="openRules()">üìú –ü—Ä–∞–≤–∏–ª–∞</button>
      <button onclick="openCabinet()">üë§ –õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç</button>
    </div>
  </header>

  <main>
    <!-- –ì–ª–∞–≤–Ω—ã–π –±–ª–æ–∫ -->
    <section class="card" id="about">
      <h2>üè∞ –û —Å–µ—Ä–≤–µ—Ä–µ</h2>
      <p>–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ <b>Elysium Project</b>! –£–Ω–∏–∫–∞–ª—å–Ω—ã–µ –º–∏—Ä—ã, —á–µ—Å—Ç–Ω–æ–µ –≤—ã–∂–∏–≤–∞–Ω–∏–µ –∏ –¥—Ä—É–∂–Ω–æ–µ –∫–æ–º—å—é–Ω–∏—Ç–∏ –∂–¥—É—Ç —Ç–µ–±—è.</p>
      <div style="text-align:center;">
        <button class="play-big" onclick="scrollToIp()">üöÄ –ù–∞—á–∞—Ç—å –∏–≥—Ä–∞—Ç—å</button>
      </div>
      <div style="text-align:center;">
        <a class="tg-link" href="https://t.me/tima1445688" target="_blank">üí¨ Telegram</a>
      </div>
    </section>

    <!-- –ë–ª–æ–∫ —Å IP -->
    <section class="card" id="ip-section">
      <h2>üåç –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ —Å–µ—Ä–≤–µ—Ä—É</h2>
      <p><b>IP:</b> 213.152.43.1:25617</p>
      <p><b>–í–µ—Ä—Å–∏—è:</b> 1.21.8</p>
      <button class="copy-btn" onclick="copyIp()">üìã –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å IP</button>
    </section>

    <!-- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ -->
    <section class="card" id="users">
      <h2>üë• –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏</h2>
      <div id="user-list" class="user-list"></div>
    </section>

    <!-- –ü–†–ê–í–ò–õ–ê ‚Äî –ü–û–õ–ù–û–°–¢–¨–Æ -->
    <section class="card" id="rules">
      <h2>üìú –ü—Ä–∞–≤–∏–ª–∞</h2>
<pre style="white-space:pre-wrap; font-family:inherit; font-size:14px; line-height:1.4;">
üî• 1.1: –ó–∞–ø—Ä–µ—â–µ–Ω—ã –≥—Ä—É–±—ã–µ —Ä–∞–∑–±–∏—Ä–∞—Ç–µ–ª—å—Å—Ç–≤–∞ –∏ –æ—Å–∫–æ—Ä–±–ª–µ–Ω–∏—è –≥—Ä—É–±–æ–≥–æ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∞ –≤ —Å—Ç–æ—Ä–æ–Ω—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏–ª–∏ –µ–≥–æ –∫—Ä—É–≥–∞ –æ–±—â–µ–Ω–∏—è: —É–≥—Ä–æ–∑–∞ –Ω–∞–Ω–µ—Å–µ–Ω–∏—è —É–≤–µ—á–∏–π, —É–ø–æ–º–∏–Ω–∞–Ω–∏–µ —Ä–æ–¥—Å—Ç–≤–µ–Ω–Ω–∏–∫–æ–≤ –≤ –æ—Å–∫–æ—Ä–±–∏—Ç–µ–ª—å–Ω–æ–π —Ñ–æ—Ä–º–µ, –∫–æ—Å–≤–µ–Ω–Ω—ã–µ —É–≥—Ä–æ–∑—ã, –∞ —Ç–∞–∫–∂–µ –≥—Ä—É–±–æ–µ –æ—Å–∫–æ—Ä–±–ª–µ–Ω–∏–µ –±–ª–∏–∑–∫–æ–≥–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è –∏–ª–∏ –µ–≥–æ —Å–∞–º–æ–≥–æ.
üìå –ù–∞–∫–∞–∑–∞–Ω–∏–µ: 1 –ø—Ä–µ–¥. + –º—É—Ç –Ω–∞ 2 —á–∞—Å–∞.

üî• 1.2: –ó–∞–ø—Ä–µ—â–µ–Ω—ã –¥–µ—Å—Ç—Ä—É–∫—Ç–∏–≤–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è –ø–æ –æ—Ç–Ω–æ—à–µ–Ω–∏—é –∫ –ø—Ä–æ–µ–∫—Ç—É, –∏–≥—Ä–æ–≤–æ–º—É —Å–µ—Ä–≤–µ—Ä—É –∏ —É–ø—Ä–∞–≤–ª—è—é—â–µ–π –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ü–∏–∏: –Ω–µ–∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–∏–≤–Ω–∞—è –∫—Ä–∏—Ç–∏–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞ –∏–ª–∏ –µ–≥–æ —É–ø—Ä–∞–≤–ª—è—é—â–µ–≥–æ —Å–æ—Å—Ç–∞–≤–∞, –≤ —Ç.—á. —Å–æ–∑–¥–∞—Ç–µ–ª—è –ø—Ä–æ–µ–∫—Ç–∞, –ø—Ä–∏–∑—ã–≤—ã –ø–æ–∫–∏–Ω—É—Ç—å —Å–µ—Ä–≤–µ—Ä –∏–ª–∏ –Ω–∞—Ä—É—à–∏—Ç—å –µ–≥–æ —Ä–∞–∑–≤–∏—Ç–∏–µ –∏–ª–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ –ø—Ä–∞–≤–∏–ª–∞, –∞ —Ç–∞–∫–∂–µ –ª—é–±—ã–µ –¥–µ–π—Å—Ç–≤–∏—è, —á—Ç–æ –º–æ–≥—É—Ç –±—ã—Ç—å —Ä–∞—Å—Ü–µ–Ω–µ–Ω—ã –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ü–∏–µ–π –∫–∞–∫ –ø–æ–º–µ—Ö–∞ –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏–∏.
üìå –ù–∞–∫–∞–∑–∞–Ω–∏–µ: 2 –ø—Ä–µ–¥. + –º—É—Ç –Ω–∞ 1 —á–∞—Å.
  
üî• 1.3: –ó–∞–ø—Ä–µ—â–µ–Ω—ã –Ω–µ–≤–∏–¥–∏–º—ã–µ Unicode-like –Ω–∏–∫–Ω–µ–π–º—ã, –Ω–∞–º–µ—Ä–µ–Ω–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª–µ–π (–∞–≤–∞—Ç–∞—Ä + –Ω–∏–∫–Ω–µ–π–º). –ù–µ –ø–æ–æ—â—Ä—è—é—Ç—Å—è –æ—Å–∫–æ—Ä–±–∏—Ç–µ–ª—å–Ω—ã–µ –∏ –ø—Ä–æ–≤–æ–∫–∞—Ü–∏–æ–Ω–Ω—ã–µ —Å—Ç–∞—Ç—É—Å—ã/–±–∏–æ –∏–∑ –ø—Ä–æ—Ñ–∏–ª–µ–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∏ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ –ø—Ä–æ–µ–∫—Ç–∞.
üìå –ù–∞–∫–∞–∑–∞–Ω–∏–µ: 1 –ø—Ä–µ–¥. / –∫–∏–∫ –≤ –ø–æ—Å–ª–µ–¥—É—é—â–∏—Ö –Ω–∞—Ä—É—à–µ–Ω–∏—è—Ö –±–∞–Ω
  
üî• 1.4: –ó–∞–ø—Ä–µ—â–µ–Ω–∞ –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è –∏ –ø—É–±–ª–∏–∫–∞—Ü–∏—è –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –∏ –ª–∏—á–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –ª—é–±–æ–≥–æ —É—á–∞—Å—Ç–Ω–∏–∫–∞, –≤ —Ç–æ–º —á–∏—Å–ª–µ –ª–∏—á–Ω—ã–µ –ø–µ—Ä–µ–ø–∏—Å–∫–∏, —Ñ–æ—Ç–æ, –≤–∏–¥–µ–æ-–º–∞—Ç–µ—Ä–∏–∞–ª—ã –∏ –ø—Ä–æ—á–µ–µ –º–µ–¥–∏–∞. –ö–∞—Ç–µ–≥–æ—Ä–∏—á–µ—Å–∫–∏ –∑–∞–ø—Ä–µ—â–µ–Ω—ã —É–≥—Ä–æ–∑—ã —Ä–∞—Å–ø—Ä–∞–≤–æ–π –∏ –ø—Ä–∏—á–∏–Ω–µ–Ω–∏—è –≤—Ä–µ–¥–∞, –¥–µ–∞–Ω–æ–Ω–∏–º–∏–∑–∞—Ü–∏—è, –¥–æ–∫—Å–∏–Ω–≥, —Å–≤–∞—Ç—Ç–∏–Ω–≥, –ø—Ä–æ—á–µ–µ.
üìå –ù–∞–∫–∞–∑–∞–Ω–∏–µ: –±–∞–Ω 
  
üî• 1.5: –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ü–∏—è –æ—Å—Ç–∞–≤–ª—è–µ—Ç –∑–∞ —Å–æ–±–æ–π –ø—Ä–∞–≤–æ –±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å –∏ –æ–≥—Ä–∞–Ω–∏—á–∏–≤–∞—Ç—å –¥–æ—Å—Ç—É–ø –ø—Ä–æ–±–ª–µ–º–Ω—ã–º –∏ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–Ω—ã–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º –≤ —Ä–∞–º–∫–∞—Ö –ø—Ä–æ–µ–∫—Ç–∞. –ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–µ–¥—ë—Ç —Å–µ–±—è –∑–ª–æ–Ω–∞–º–µ—Ä–µ–Ω–Ω–æ, –ø—Ä–æ–≤–æ–∫–∞—Ü–∏–æ–Ω–Ω–æ –∏ —É–≥—Ä–æ–∂–∞–µ—Ç –±–ª–∞–≥–æ–ø–æ–ª—É—á–∏—é –ø—Ä–æ–µ–∫—Ç–∞ –∏–ª–∏ –µ–≥–æ —É—á–∞—Å—Ç–Ω–∏–∫–∞–º, –≤–æ–∑–º–æ–∂–Ω–æ –ø—Ä–∏–Ω—è—Ç–∏–µ —Ä–µ—à–µ–Ω–∏—è –æ –µ–≥–æ –±–ª–æ–∫–∏—Ä–æ–≤–∫–µ.
üìå –ù–∞–∫–∞–∑–∞–Ω–∏–µ: –ø—Ä–µ–¥. / –º—É—Ç –Ω–∞ —É—Å–º–æ—Ç—Ä–µ–Ω–∏–µ –º–æ–¥–µ—Ä–∞—Ü–∏–∏.
 
üî• 1.6: –ó–∞–ø—Ä–µ—â–µ–Ω–∞ –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è —à–æ–∫-–∫–æ–Ω—Ç–µ–Ω—Ç–∞, —Ç–æ—à–Ω–æ—Ç–≤–æ—Ä–Ω–æ–≥–æ –∏–ª–∏ –∫–æ–Ω—Ç–µ–Ω—Ç–∞ —Å–µ–∫—Å—É–∞–ª—å–Ω–æ–≥–æ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∞, –∞ —Ç–∞–∫–∂–µ –ª—é–±–æ–≥–æ —Ä–æ–¥–∞ –∞–≥–∏—Ç–∞—Ü–∏—è –∏ –ø—Ä–æ–ø–∞–≥–∞–Ω–¥–∞ –∫ —É–ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏—é –ø—Å–∏—Ö–æ—Ç—Ä–æ–ø–Ω—ã—Ö –≤–µ—â–µ—Å—Ç–≤.
üìå –ù–∞–∫–∞–∑–∞–Ω–∏–µ: 1 –ø—Ä–µ–¥. + –º—É—Ç –Ω–∞ 4 —á–∞—Å–∞.
  
üî• 1.7: –ó–∞–ø—Ä–µ—â–µ–Ω–æ —Ä–∞–∑–∂–∏–≥–∞–Ω–∏–µ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤ –Ω–∞ –Ω–∞—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–π –ø–æ—á–≤–µ, —Ä–µ–ª–∏–≥–∏–æ–∑–Ω–æ–π –æ—Å–Ω–æ–≤–µ –∏ –¥–∏—Å–∫—Ä–∏–º–∏–Ω–∞—Ü–∏—è –ø–æ –ª—é–±–æ–º—É –≤—ã—à–µ–ø–µ—Ä–µ—á–∏—Å–ª–µ–Ω–Ω–æ–º—É –ø—Ä–∏–∑–Ω–∞–∫—É –ø–æ –æ—Ç–Ω–æ—à–µ–Ω–∏—é –∫ –ª—é–±–æ–º—É —É—á–∞—Å—Ç–Ω–∏–∫—É –ø—Ä–æ–µ–∫—Ç–∞ –∏/–∏–ª–∏ —Å–µ—Ä–≤–µ—Ä–∞. –°—é–¥–∞ –≤—Ö–æ–¥–∏—Ç –≤—ã—Å—Ç–∞–≤–ª–µ–Ω–∏–µ —Ä–µ–∞–∫—Ü–∏–π –ø—Ä–æ–≤–æ–∫–∞—Ü–∏–æ–Ω–Ω–æ–≥–æ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∞ –∏ –ø–æ–¥–¥–µ—Ä–∂–∫–∞ —Ç–∞–∫–æ–≤—ã—Ö.
üìå –ù–∞–∫–∞–∑–∞–Ω–∏–µ: 1 –ø—Ä–µ–¥. + –º—É—Ç –Ω–∞ 1 —á–∞—Å.
 
üî• 1.8: –ó–∞–ø—Ä–µ—â–µ–Ω–æ –ø—Ä–µ–ø—è—Ç—Å—Ç–≤–æ–≤–∞—Ç—å —Ä–∞–±–æ—Ç–µ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ü–∏–∏, –ø—É–±–ª–∏—á–Ω–æ –∫—Ä–∏—Ç–∏–∫–æ–≤–∞—Ç—å –∏—Ö –∏–ª–∏ –¥–∏—Å–∫—Ä–µ–¥–∏—Ç–∏—Ä–æ–≤–∞—Ç—å –¥–µ–π—Å—Ç–≤–∏—è —É–ø—Ä–∞–≤–ª—è—é—â–µ–≥–æ —Å–æ—Å—Ç–∞–≤–∞, –≤ —Ç.—á. –º–æ–¥–µ—Ä–∞—Ü–∏–∏.
üìå –ù–∞–∫–∞–∑–∞–Ω–∏–µ: –º—É—Ç –Ω–∞ 1 —á–∞—Å, –ø—Ä–∏ –ø–æ–≤—Ç–æ—Ä–µ ‚Äî 4 —á–∞—Å–∞.
  
üî• 1.9: –ó–∞–ø—Ä–µ—â–µ–Ω–æ –Ω–µ—Ä–∞—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —á–∞—Ç–∞ (–∫–∞–∫ –≥–æ–ª–æ—Å–æ–≤–æ–≥–æ, —Ç–∞–∫ –∏ —Ç–µ–∫—Å—Ç–æ–≤–æ–≥–æ), —á—Ç–æ –≤–∫–ª—é—á–∞–µ—Ç –≤ —Å–µ–±—è —á—Ä–µ–∑–º–µ—Ä–Ω—ã–π –∫–∞–ø—Å, –æ—Ñ—Ñ—Ç–æ–ø, —Å–ø–∞–º, —Ñ–ª—É–¥, –º—É–ª—å—Ç–∏–ø–æ—Å—Ç –∏ —Ç.–¥.
üìå –ù–∞–∫–∞–∑–∞–Ω–∏–µ: 1 –ø—Ä–µ–¥. + –º—É—Ç –Ω–∞ 1 —á–∞—Å
  
üî• 1.10: –ó–∞–ø—Ä–µ—â–µ–Ω–æ –∑–ª–æ—É–ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ –æ—Ç—á—ë—Ç–∞–º–∏ –≤ #—Å–æ–æ–±—â–∏—Ç—å-–æ-–Ω–∞—Ä—É—à–µ–Ω–∏–∏; –∞ —Ç–∞–∫–∂–µ –∫–ª–µ–≤–µ—Ç–∞. –û—Ç—á—ë—Ç—ã –æ—Ç —Ç—Ä–µ—Ç—å–∏—Ö –ª–∏—Ü –Ω–µ –ø—Ä–∏–Ω–∏–º–∞—é—Ç—Å—è.
üìå –ù–∞–∫–∞–∑–∞–Ω–∏–µ: –ø—Ä–µ–¥. + –º—É—Ç –Ω–∞ 2 —á–∞—Å–∞

üî• 1.11: –ó–∞–ø—Ä–µ—â–µ–Ω–æ –∑–ª–æ—É–ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ –ø—Ä–∞–≤–∏–ª–∞–º–∏ –ø—Ä–æ–µ–∫—Ç–∞, –≤ —Ç–æ–º —á–∏—Å–ª–µ –ø–æ–∏—Å–∫ –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ –Ω–∏—Ö –ª–∞–∑–µ–µ–∫ —Å —Ü–µ–ª—å—é –ø–æ–ª—É—á–µ–Ω–∏—è –ª–∏—á–Ω–æ–π –≤—ã–≥–æ–¥—ã –∏–ª–∏ –æ–±—Ö–æ–¥–∞ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π. –¢–∞–∫–∏–µ –¥–µ–π—Å—Ç–≤–∏—è —Å—á–∏—Ç–∞—é—Ç—Å—è –∑–ª–æ–Ω–∞–º–µ—Ä–µ–Ω–Ω—ã–º–∏ –∏ –ø–æ–¥—Ä—ã–≤–∞—é—Ç –ø–æ—Ä—è–¥–æ–∫ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ.
üìå –ù–∞–∫–∞–∑–∞–Ω–∏–µ: 1 –ø—Ä–µ–¥. + –º—É—Ç –Ω–∞ 1 –¥–µ–Ω—å

–ü—Ä–∏–º–µ—á–∞–Ω–∏—è

üî• 2.1: –ó–∞–ø—Ä–µ—â–µ–Ω—ã –ø–æ–ø—ã—Ç–∫–∏ –æ–±—Ö–æ–¥–∞ –∏–ª–∏ —É—Ö–æ–¥–∞ –æ—Ç –≤—ã–¥–∞–Ω–Ω–æ–≥–æ –Ω–∞–∫–∞–∑–∞–Ω–∏—è –ø—É—Ç—ë–º —Å–æ–∑–¥–∞–Ω–∏—è –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –∞–∫–∫–∞—É–Ω—Ç–æ–≤.
üìå –ù–∞–∫–∞–∑–∞–Ω–∏–µ: –±–∞–Ω –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –∏ –¥–æ–ø. –∞–∫–∫–∞—É–Ω—Ç–æ–≤ –±–µ—Å—Å—Ä–æ—á–Ω–æ.
  
üî• 2.2: –ó–∞–ø—Ä–µ—â–µ–Ω–æ –≤—ã–ø—Ä–∞—à–∏–≤–∞—Ç—å —á—Ç–æ-–ª–∏–±–æ —Å–≤—è–∑–∞–Ω–Ω–æ–µ —Å –∏–≥—Ä–æ–≤—ã–º —Å–µ—Ä–≤–µ—Ä–æ–º –∏/–∏–ª–∏ –ø—Ä–æ–µ–∫—Ç–æ–º –≤ —Ä–∞–º–∫–∞—Ö –æ—Ç–∫—Ä—ã—Ç—ã—Ö —á–∞—Ç–æ–≤ –∏ –æ–±—Å—É–∂–¥–µ–Ω–∏–π.
üìå –ù–∞–∫–∞–∑–∞–Ω–∏–µ: 1 –ø—Ä–µ–¥. + –º—É—Ç –Ω–∞ 2 —á–∞—Å–∞.
 
üî• 2.3: –ó–∞–ø—Ä–µ—â–µ–Ω–æ –Ω–µ–∞–¥–µ–∫–≤–∞—Ç–Ω–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ –≤ –≥–æ–ª–æ—Å–æ–≤—ã—Ö –∫–∞–Ω–∞–ª–∞—Ö –∏ –≤ —Å–∞–º–æ–π –∏–≥—Ä–µ, –Ω–∞—Ü–µ–ª–µ–Ω–Ω–æ–µ –Ω–∞ –ø—Ä–µ–ø—è—Ç—Å—Ç–≤–∏–µ –æ–±—â–µ–Ω–∏—é (—Ç—Ä–∞–Ω—Å–ª—è—Ü–∏—è –≥—Ä–æ–º–∫–∏—Ö –∑–≤—É–∫–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –ø—Ä–µ–ø—è—Ç—Å—Ç–≤—É—é—Ç –æ–±—â–µ–Ω–∏—é).
üìå –ù–∞–∫–∞–∑–∞–Ω–∏–µ: –≤–æ–π—Å-–º—É—Ç –Ω–∞ 2 —á–∞—Å–∞.
  
üî• 2.4: –ó–∞–ø—Ä–µ—â–µ–Ω–∞ —Ä–µ–∫–ª–∞–º–∞ —Å—Ç–æ—Ä–æ–Ω–Ω–∏—Ö –∫–æ–º–º–µ—Ä—á–µ—Å–∫–∏—Ö –∏/–∏–ª–∏ —Å–∫–∞–º-—Ä–µ—Å—É—Ä—Å–æ–≤ –∏ –ø—Ä–æ—á–µ–≥–æ –≤ –ª—é–±—ã—Ö –µ—ë –ø—Ä–æ—è–≤–ª–µ–Ω–∏—è—Ö.
üìå –ù–∞–∫–∞–∑–∞–Ω–∏–µ: –∫–∏–∫ / –±–∞–Ω

üî• 2.5: –ó–∞–ø—Ä–µ—â–µ–Ω—ã –∑–∞–≤—É–∞–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∏ –∑–∞–º–∞—Å–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∞–Ω–∞–ª–æ–≥–∏ –∑–∞–ø—Ä–µ—â—ë–Ω–Ω—ã—Ö –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é –±–∞–Ω–≤–æ—Ä–¥–æ–≤ –≤ —Ä–∞–º–∫–∞—Ö –ø—Ä–æ–µ–∫—Ç–∞ ‚Äî —ç—Ç–æ —Å—á–∏—Ç–∞–µ—Ç—Å—è —É—Ö–æ–¥–æ–º –æ—Ç –Ω–∞–∫–∞–∑–∞–Ω–∏—è.
üìå –ù–∞–∫–∞–∑–∞–Ω–∏–µ: 1 –ø—Ä–µ–¥. / –º—É—Ç –Ω–∞ 1 —á–∞—Å / –±–∞–Ω (–Ω–∞ —É—Å–º–æ—Ç—Ä–µ–Ω–∏–µ –º–æ–¥–µ—Ä–∞—Ü–∏–∏).
</pre>
    </section>
  </main>

  <footer>¬© 2025 Elysium Project. –í—Å–µ –ø—Ä–∞–≤–∞ –∑–∞—â–∏—â–µ–Ω—ã.</footer>

  <!-- –ú–æ–¥–∞–ª–∫–∏ -->
  <div class="modal" id="modal">
    <!-- –í—Ö–æ–¥ -->
    <div class="modal-content" id="login-panel">
      <span class="modal-close" onclick="closeModal()">&times;</span>
      <h2>–í—Ö–æ–¥ / –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</h2>
      <input type="text" id="nickname" placeholder="–ù–∏–∫–Ω–µ–π–º">
      <input type="password" id="password" placeholder="–ü–∞—Ä–æ–ª—å">
      <div class="remember">
        <input type="checkbox" id="rememberMe">
        <label for="rememberMe">–ó–∞–ø–æ–º–Ω–∏—Ç—å –º–µ–Ω—è</label>
      </div>
      <button onclick="loginUser()">üîë –í–æ–π—Ç–∏</button>
      <button onclick="registerUser()">‚úÖ –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è</button>
      <button class="google-btn" onclick="loginGoogle()">üîë –í–æ–π—Ç–∏ —á–µ—Ä–µ–∑ Google</button>
    </div>

    <!-- –õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç -->
    <div class="modal-content" id="user-panel">
      <span class="modal-close" onclick="closeModal()">&times;</span>
      <h2>üë§ –ü—Ä–æ—Ñ–∏–ª—å</h2>
      <p>ID: <b id="user-id"></b></p>
      <p>üéÆ –ù–∏–∫: <b id="user-nick"></b></p>
      <p>üè∞ –†–∞–Ω–≥: <span id="current-rank"></span></p>
      <div id="self-admin-tools" style="display:none; margin-top:10px;">
        <h3>‚öôÔ∏è –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å</h3>
        <select id="self-rank-select"></select>
        <button onclick="setSelfRank()">‚úÖ –°–º–µ–Ω–∏—Ç—å —Å–≤–æ–π —Ä–∞–Ω–≥</button>
        <input type="number" id="self-id-input" placeholder="–ù–æ–≤—ã–π ID">
        <button onclick="setSelfId()">‚ôªÔ∏è –°–º–µ–Ω–∏—Ç—å —Å–≤–æ–π ID</button>
        <button onclick="deleteSelf()">üóë –£–¥–∞–ª–∏—Ç—å —Å–≤–æ–π –∞–∫–∫–∞—É–Ω—Ç</button>
      </div>
      <button onclick="logout()">üö™ –í—ã–π—Ç–∏</button>
    </div>

    <!-- –ü—Ä–æ—Å–º–æ—Ç—Ä —á—É–∂–æ–≥–æ –ø—Ä–æ—Ñ–∏–ª—è -->
    <div class="modal-content" id="profile-view">
      <span class="modal-close" onclick="closeModal()">&times;</span>
      <h2>üë§ –ü—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</h2>
      <p>ID: <b id="view-id"></b></p>
      <p>üéÆ –ù–∏–∫: <b id="view-nick"></b></p>
      <p>üè∞ –†–∞–Ω–≥: <span id="view-rank"></span></p>
      <div id="admin-tools" style="display:none; margin-top:10px;">
        <h3>‚öôÔ∏è –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å</h3>
        <select id="admin-rank-select"></select>
        <button onclick="setUserRank()">‚úÖ –°–º–µ–Ω–∏—Ç—å —Ä–∞–Ω–≥</button>
        <input type="number" id="admin-id-input" placeholder="–ù–æ–≤—ã–π ID">
        <button onclick="setUserId()">‚ôªÔ∏è –°–º–µ–Ω–∏—Ç—å ID</button>
        <button onclick="deleteUser()">üóë –£–¥–∞–ª–∏—Ç—å –∞–∫–∫–∞—É–Ω—Ç</button>
      </div>
    </div>
  </div>

  <script>
    // ====== –ù–ê–°–¢–†–û–ô–ö–ê API ======
    // –í–ø–∏—à–∏—Ç–µ —Å—é–¥–∞ URL –≤–∞—à–µ–≥–æ –±—ç–∫–µ–Ω–¥–∞ (–ø—Ä–∏–º–µ—Ä: "https://your-app.onrender.com")
    const API_BASE = "http://localhost:3000";

    // –¶–≤–µ—Ç–∞ —Ä–∞–Ω–≥–æ–≤
    const rankColors = {
      "–ò–≥—Ä–æ–∫":"#ffffff",
      "–°—Ç–∞–∂—ë—Ä":"#f8c8dc",
      "–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä":"#ff1493",
      "–ì–ª–∞–≤–Ω—ã–π –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä":"#e53935",
      "–ö—É—Ä–∞—Ç–æ—Ä":"#ff9800",
      "–ú–æ–¥–µ—Ä–∞—Ç–æ—Ä":"#87cefa",
      "–°—Ç–∞—Ä—à–∏–π –ú–æ–¥–µ—Ä–∞—Ç–æ—Ä":"#42a5f5",
      "–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä":"#1565c0",
      "–°—Ç–∞—Ä—à–∏–π –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä":"#7CFC00",
      "–û—Å–Ω–æ–≤–∞—Ç–µ–ª—å":"#8e24aa"
    };

    // –ì–ª–æ–±–∞–ª—å–Ω—ã–µ
    let users = [];          // –≥—Ä—É–∑–∏–º —Å —Å–µ—Ä–≤–µ—Ä–∞
    let currentUser = null;  // { id, nick, rank }
    let viewedUser = null;

    // ====== API –æ–±—ë—Ä—Ç–∫–∏ ======
    async function apiGetUsers(){
      const r = await fetch(API_BASE + "/users");
      if(!r.ok) throw new Error("–ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–ª—É—á–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π");
      return await r.json();
    }
    async function apiRegister(nick, pass){
      const r = await fetch(API_BASE + "/users", {
        method:"POST",
        headers:{ "Content-Type":"application/json" },
        body: JSON.stringify({nick, pass})
      });
      if(!r.ok){
        const e = await r.json().catch(()=>({}));
        throw new Error(e.error || "–û—à–∏–±–∫–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏");
      }
      return await r.json();
    }
    async function apiLogin(nick, pass){
      const r = await fetch(API_BASE + "/login", {
        method:"POST",
        headers:{ "Content-Type":"application/json" },
        body: JSON.stringify({nick, pass})
      });
      if(!r.ok){
        const e = await r.json().catch(()=>({}));
        throw new Error(e.error || "–û—à–∏–±–∫–∞ –≤—Ö–æ–¥–∞");
      }
      return await r.json();
    }
    async function apiPatchUser(nick, data){
      const r = await fetch(API_BASE + "/users/" + encodeURIComponent(nick), {
        method:"PATCH",
        headers:{ "Content-Type":"application/json" },
        body: JSON.stringify(data)
      });
      if(!r.ok){
        const e = await r.json().catch(()=>({}));
        throw new Error(e.error || "–û—à–∏–±–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è");
      }
      return await r.json();
    }
    async function apiDeleteUser(nick){
      const r = await fetch(API_BASE + "/users/" + encodeURIComponent(nick), { method:"DELETE" });
      if(!r.ok){
        const e = await r.json().catch(()=>({}));
        throw new Error(e.error || "–û—à–∏–±–∫–∞ —É–¥–∞–ª–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è");
      }
      return await r.json();
    }

    // ====== –†–µ–Ω–¥–µ—Ä –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π ======
    async function refreshUsers(){
      users = await apiGetUsers();
      renderUsers();
    }
    function renderUsers(){
      const container = document.getElementById("user-list");
      container.innerHTML = "";
      const sorted = [...users].sort((a,b)=> (a.id||0) - (b.id||0));
      sorted.forEach(u=>{
        const div = document.createElement("div");
        div.className="user-card";
        div.innerHTML = `
          <div>ID: ${u.id}</div>
          <div class="nick" style="color:${rankColors[u.rank]||"#fff"}">üéÆ ${u.nick}</div>
          <div>üè∞ <span style="color:${rankColors[u.rank]||'#fff'}">${u.rank}</span></div>`;
        div.querySelector(".nick").onclick = ()=>viewProfile(u);

        if(currentUser && (currentUser.rank==="–û—Å–Ω–æ–≤–∞—Ç–µ–ª—å" || currentUser.rank==="–°—Ç–∞—Ä—à–∏–π –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä")){
          const btn = document.createElement("button");
          btn.className="delete-btn";
          btn.textContent="üóë –£–¥–∞–ª–∏—Ç—å";
          btn.onclick = async (e)=>{
            e.stopPropagation();
            if(confirm("–£–¥–∞–ª–∏—Ç—å "+u.nick+"?")){
              await apiDeleteUser(u.nick);
              await refreshUsers();
            }
          };
          div.appendChild(btn);
        }
        container.appendChild(div);
      });
    }

    // ====== –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è / –í—Ö–æ–¥ ======
    async function registerUser(){
      const nick = document.getElementById("nickname").value.trim();
      const pass = document.getElementById("password").value.trim();
      if(!nick || !pass){ alert("–í–≤–µ–¥–∏—Ç–µ –¥–∞–Ω–Ω—ã–µ"); return; }
      try{
        const user = await apiRegister(nick, pass);
        currentUser = user;
        if(document.getElementById("rememberMe")?.checked){
          localStorage.setItem("currentUserNick", user.nick);
          localStorage.setItem("currentUserPass", pass);
        }
        showProfile(user);
        await refreshUsers();
      }catch(e){ alert(e.message); }
    }

    async function loginUser(){
      const nick = document.getElementById("nickname").value.trim();
      const pass = document.getElementById("password").value.trim();
      if(!nick || !pass){ alert("–í–≤–µ–¥–∏—Ç–µ –¥–∞–Ω–Ω—ã–µ"); return; }
      try{
        const user = await apiLogin(nick, pass);
        currentUser = user;
        if(document.getElementById("rememberMe")?.checked){
          localStorage.setItem("currentUserNick", nick);
          localStorage.setItem("currentUserPass", pass);
        } else {
          localStorage.removeItem("currentUserNick");
          localStorage.removeItem("currentUserPass");
        }
        showProfile(user);
        await refreshUsers();
      }catch(e){ alert(e.message); }
    }

    async function loginGoogle(){
      try{
        const nick = "GoogleUser" + Date.now();
        const pass = "oauth_google";
        const user = await apiRegister(nick, pass);
        currentUser = user;
        if(document.getElementById("rememberMe")?.checked){
          localStorage.setItem("currentUserNick", nick);
          localStorage.setItem("currentUserPass", pass);
        }
        alert("–í—ã–ø–æ–ª–Ω–µ–Ω –≤—Ö–æ–¥ —á–µ—Ä–µ–∑ Google –∫–∞–∫: " + nick + (user.rank==="–û—Å–Ω–æ–≤–∞—Ç–µ–ª—å" ? " (–Ω–∞–∑–Ω–∞—á–µ–Ω –û—Å–Ω–æ–≤–∞—Ç–µ–ª–µ–º)" : ""));
        showProfile(user);
        await refreshUsers();
      }catch(e){ alert(e.message); }
    }

    function logout(){
      currentUser = null;
      localStorage.removeItem("currentUserNick");
      localStorage.removeItem("currentUserPass");
      openModal("login");
    }

    // ====== –ü—Ä–æ—Ñ–∏–ª–∏ ======
    function showProfile(user){
      document.getElementById("user-id").textContent = user.id;
      document.getElementById("user-nick").textContent = user.nick;
      document.getElementById("current-rank").textContent = user.rank;
      document.getElementById("current-rank").style.color = rankColors[user.rank] || "#fff";

      const selfTools = document.getElementById("self-admin-tools");
      if(currentUser && (currentUser.rank==="–û—Å–Ω–æ–≤–∞—Ç–µ–ª—å" || currentUser.rank==="–°—Ç–∞—Ä—à–∏–π –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä")){
        selfTools.style.display = "block";
        const sel = document.getElementById("self-rank-select"); sel.innerHTML="";
        Object.keys(rankColors).forEach(r=>{
          const opt = document.createElement("option");
          opt.value=r; opt.textContent=r; opt.style.color=rankColors[r];
          if(user.rank===r) opt.selected=true;
          sel.appendChild(opt);
        });
        document.getElementById("self-id-input").value = user.id;
      } else {
        selfTools.style.display = "none";
      }
      openModal("user");
    }

    function viewProfile(user){
      // user –ø—Ä–∏—Ö–æ–¥–∏—Ç –∏–∑ —Å–ø–∏—Å–∫–∞ (–∞–∫—Ç—É–∞–ª—å–Ω—ã–π —Å —Å–µ—Ä–≤–µ—Ä–∞)
      viewedUser = users.find(u=>u.nick===user.nick) || user;
      document.getElementById("view-id").textContent = viewedUser.id;
      document.getElementById("view-nick").textContent = viewedUser.nick;
      document.getElementById("view-rank").textContent = viewedUser.rank;
      document.getElementById("view-rank").style.color = rankColors[viewedUser.rank] || "#fff";

      const adminTools = document.getElementById("admin-tools");
      if(currentUser && (currentUser.rank==="–û—Å–Ω–æ–≤–∞—Ç–µ–ª—å" || currentUser.rank==="–°—Ç–∞—Ä—à–∏–π –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä")){
        adminTools.style.display = "block";
        const sel=document.getElementById("admin-rank-select"); sel.innerHTML="";
        Object.keys(rankColors).forEach(r=>{
          const opt=document.createElement("option");
          opt.value=r; opt.textContent=r; opt.style.color=rankColors[r];
          if(viewedUser.rank===r) opt.selected=true;
          sel.appendChild(opt);
        });
        document.getElementById("admin-id-input").value = viewedUser.id;
      } else {
        adminTools.style.display = "none";
      }
      openModal("view");
    }

    // ====== –ê–¥–º–∏–Ω-–¥–µ–π—Å—Ç–≤–∏—è (—á—É–∂–æ–π –ø—Ä–æ—Ñ–∏–ª—å) ======
    async function setUserRank(){
      if(!viewedUser) return;
      const newRank = document.getElementById("admin-rank-select").value;
      try{
        const updated = await apiPatchUser(viewedUser.nick, { rank: newRank });
        viewedUser = updated;
        if(currentUser && currentUser.nick === updated.nick) currentUser = updated;
        await refreshUsers();
        viewProfile(updated);
      }catch(e){ alert(e.message); }
    }

    async function setUserId(){
      if(!viewedUser) return;
      const newId = parseInt(document.getElementById("admin-id-input").value);
      if(isNaN(newId) || newId<0){ alert("–ù–µ–≤–µ—Ä–Ω—ã–π ID"); return; }
      try{
        const updated = await apiPatchUser(viewedUser.nick, { id: newId });
        viewedUser = updated;
        if(currentUser && currentUser.nick === updated.nick) currentUser = updated;
        await refreshUsers();
        viewProfile(updated);
      }catch(e){ alert(e.message); }
    }

    async function deleteUser(){
      if(!viewedUser) return;
      if(!confirm("–£–¥–∞–ª–∏—Ç—å –∞–∫–∫–∞—É–Ω—Ç: " + viewedUser.nick + " ?")) return;
      try{
        await apiDeleteUser(viewedUser.nick);
        if(currentUser && currentUser.nick === viewedUser.nick){
          currentUser = null;
          localStorage.removeItem("currentUserNick");
          localStorage.removeItem("currentUserPass");
          closeModal();
        } else {
          closeModal();
        }
        await refreshUsers();
        alert("–ê–∫–∫–∞—É–Ω—Ç —É–¥–∞–ª—ë–Ω");
      }catch(e){ alert(e.message); }
    }

    // ====== –°–≤–æ–π –ø—Ä–æ—Ñ–∏–ª—å ‚Äî –∞–¥–º–∏–Ω-–¥–µ–π—Å—Ç–≤–∏—è ======
    async function setSelfRank(){
      if(!currentUser) return;
      const newRank = document.getElementById("self-rank-select").value;
      try{
        const updated = await apiPatchUser(currentUser.nick, { rank: newRank });
        currentUser = updated;
        await refreshUsers();
        showProfile(updated);
      }catch(e){ alert(e.message); }
    }

    async function setSelfId(){
      if(!currentUser) return;
      const newId = parseInt(document.getElementById("self-id-input").value);
      if(isNaN(newId) || newId<0){ alert("–ù–µ–≤–µ—Ä–Ω—ã–π ID"); return; }
      try{
        const updated = await apiPatchUser(currentUser.nick, { id: newId });
        currentUser = updated;
        await refreshUsers();
        showProfile(updated);
      }catch(e){ alert(e.message); }
    }

    async function deleteSelf(){
      if(!currentUser) return;
      if(!confirm("–£–¥–∞–ª–∏—Ç—å —Å–≤–æ–π –∞–∫–∫–∞—É–Ω—Ç?")) return;
      try{
        await apiDeleteUser(currentUser.nick);
        currentUser = null;
        localStorage.removeItem("currentUserNick");
        localStorage.removeItem("currentUserPass");
        closeModal();
        await refreshUsers();
        alert("–ê–∫–∫–∞—É–Ω—Ç —É–¥–∞–ª—ë–Ω");
      }catch(e){ alert(e.message); }
    }

    // ====== –ú–æ–¥–∞–ª–∫–∏ / –ù–∞–≤–∏–≥–∞—Ü–∏—è / IP ======
    function openModal(panel){
      document.getElementById("modal").classList.add("active");
      document.querySelectorAll(".modal-content").forEach(m=>m.classList.remove("active"));
      if(panel==="login") document.getElementById("login-panel").classList.add("active");
      if(panel==="user") document.getElementById("user-panel").classList.add("active");
      if(panel==="view") document.getElementById("profile-view").classList.add("active");
    }
    function closeModal(){ document.getElementById("modal").classList.remove("active"); }
    function openRules(){ document.getElementById("rules").scrollIntoView({behavior:"smooth"}); }
    function openCabinet(){ if(currentUser){ showProfile(currentUser); } else { openModal("login"); } }
    function copyIp(){ navigator.clipboard.writeText("213.152.43.1:25617"); alert("IP —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω!"); }
    function scrollToIp(){ document.getElementById("ip-section").scrollIntoView({behavior:"smooth"}); }

    // ====== Init ======
    (async function init(){
      try{
        // –∞–≤—Ç–æ-–ª–æ–≥–∏–Ω –∏–∑ localStorage, –µ—Å–ª–∏ –µ—Å—Ç—å
        const savedNick = localStorage.getItem("currentUserNick");
        const savedPass = localStorage.getItem("currentUserPass");
        if(savedNick && savedPass){
          try{
            currentUser = await apiLogin(savedNick, savedPass);
          }catch(e){
            localStorage.removeItem("currentUserNick");
            localStorage.removeItem("currentUserPass");
          }
        }
        await refreshUsers();
      }catch(e){
        console.error(e);
        alert("–û—à–∏–±–∫–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏: " + e.message);
      }
    })();
  </script>
</body>
</html>
{
  "name": "elysium-api",
  "version": "1.0.0",
  "main": "index.js",
  "license": "MIT",
  "dependencies": {
    "better-sqlite3": "^9.4.0",
    "cors": "^2.8.5",
    "express": "^4.19.2"
  },
  "scripts": {
    "start": "node index.js"
  }
}
const express = require('express');
const cors = require('cors');
const Database = require('better-sqlite3');

const app = express();
app.use(cors());
app.use(express.json());

const db = new Database('elysium.db');
db.pragma('journal_mode = WAL');
db.exec(`
CREATE TABLE IF NOT EXISTS users (
  id   INTEGER PRIMARY KEY AUTOINCREMENT,
  nick TEXT UNIQUE NOT NULL,
  pass TEXT NOT NULL,
  rank TEXT NOT NULL
);
`);

function hasFounder() {
  const row = db.prepare('SELECT 1 FROM users WHERE rank = ? LIMIT 1').get('–û—Å–Ω–æ–≤–∞—Ç–µ–ª—å');
  return !!row;
}

app.get('/users', (req, res) => {
  const rows = db.prepare('SELECT id, nick, rank FROM users ORDER BY id ASC').all();
  res.json(rows);
});

app.post('/users', (req, res) => {
  const { nick, pass } = req.body || {};
  if (!nick || !pass) return res.status(400).json({ error: 'nick and pass required' });

  const exists = db.prepare('SELECT 1 FROM users WHERE nick = ?').get(nick);
  if (exists) return res.status(409).json({ error: 'nick exists' });

  const rank = hasFounder() ? '–ò–≥—Ä–æ–∫' : '–û—Å–Ω–æ–≤–∞—Ç–µ–ª—å';
  const info = db.prepare('INSERT INTO users (nick, pass, rank) VALUES (?, ?, ?)').run(nick, pass, rank);
  const user = db.prepare('SELECT id, nick, rank FROM users WHERE id = ?').get(info.lastInsertRowid);
  res.status(201).json(user);
});

app.post('/login', (req, res) => {
  const { nick, pass } = req.body || {};
  if (!nick || !pass) return res.status(400).json({ error: 'nick and pass required' });
  const user = db.prepare('SELECT id, nick, rank FROM users WHERE nick = ? AND pass = ?').get(nick, pass);
  if (!user) return res.status(401).json({ error: 'invalid credentials' });
  res.json(user);
});

app.patch('/users/:nick', (req, res) => {
  const nick = req.params.nick;
  const { rank, id } = req.body || {};
  const user = db.prepare('SELECT * FROM users WHERE nick = ?').get(nick);
  if (!user) return res.status(404).json({ error: 'not found' });

  if (typeof rank !== 'undefined') {
    if (rank === '–û—Å–Ω–æ–≤–∞—Ç–µ–ª—å') {
      const other = db.prepare('SELECT nick FROM users WHERE rank = ? AND nick != ?').get('–û—Å–Ω–æ–≤–∞—Ç–µ–ª—å', nick);
      if (other) return res.status(409).json({ error: 'founder already exists' });
    }
    db.prepare('UPDATE users SET rank = ? WHERE nick = ?').run(rank, nick);
  }

  if (typeof id !== 'undefined') {
    if (!Number.isInteger(id) || id < 0) return res.status(400).json({ error: 'bad id' });
    const conflict = db.prepare('SELECT nick FROM users WHERE id = ? AND nick != ?').get(id, nick);
    if (conflict) return res.status(409).json({ error: 'id taken' });
    db.prepare('UPDATE users SET id = ? WHERE nick = ?').run(id, nick);
  }

  const fresh = db.prepare('SELECT id, nick, rank FROM users WHERE nick = ?').get(nick);
  res.json(fresh);
});

app.delete('/users/:nick', (req, res) => {
  const nick = req.params.nick;
  const info = db.prepare('DELETE FROM users WHERE nick = ?').run(nick);
  if (info.changes === 0) return res.status(404).json({ error: 'not found' });
  res.json({ ok: true });
});

const PORT = process.env.PORT || 3000;
app.listen(PORT, () => console.log('Elysium API listening on ' + PORT));
      
